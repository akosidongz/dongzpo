---
Records:
  parameters:
    - name: zoneID
      in: path
      description: ID of the parent zone to fetch the records for
      required: true
      schema:
        type: integer
        format: int64

  get:
    tags: ["records"]
    summary: Get a list of records.
    description: |
      Returns a list of records for the given zone by its ID and is owned by the current user.
    operationId: findRecords
    responses:
      '200':
        description: |
          records response
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '../models/record.yml#/Record'
      '401':
        description: |
          Error: Unauthorized
      '403':
        description: |
          Error: Forbidden
      '404':
        description: |
          Error: Zone not found
    security:
      - Bearer: []

  post:
    tags: ["records"]
    summary: Add a new record.
    description: |
      Adds a new record to the given zone owned by the current user.
    operationId: addRecord
    requestBody:
      description: |
        Record to add.
      required: true
      content:
        application/json:
          schema:
            oneOf:
              - $ref: '../models/record.yml#/NewRecord'
              - $ref: '../models/record.yml#/NewMXRecord'
            discriminator:
              propertyName: type
              mapping:
                A: '../models/record.yml#/NewRecord'
                AAAA: '../models/record.yml#/NewRecord'
                TXT: '../models/record.yml#/NewRecord'
                CNAME: '../models/record.yml#/NewRecord'
                SPF: '../models/record.yml#/NewRecord'
                MX: '../models/record.yml#/NewMXRecord'

    responses:
      '200':
        description: zone was created response
        content:
          application/json:
            schema:
              $ref: '../models/record.yml#/Record'
      '400':
        description: |
          Error: Malformed client data
      '401':
        description: |
          Error: Unauthorized
      '403':
        description: |
          Error: Forbidden
      '404':
        description: |
          Error: Zone not found
    security:
      - Bearer: []
